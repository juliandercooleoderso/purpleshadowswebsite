<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Purple Shadows</title>
<script src="/socket.io/socket.io.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<style>
body { margin:0; padding:0; font-family:"Poppins",sans-serif; background: radial-gradient(circle at top left, #2b0030, #000); color:#fff; text-align:center; }
header { background:#3b0066; padding:15px; font-size:1.8rem; font-weight:bold; letter-spacing:2px; position:relative; }
#logged-in { position:absolute; right:20px; top:15px; font-size:1rem; color:#fff; }
nav { margin:15px; }
nav button { background:#5a00a3; color:white; border:none; padding:10px 20px; margin:5px; border-radius:12px; cursor:pointer; transition:0.3s; }
nav button:hover { background:#9b00ff; }
section { display:none; margin-top:20px; position:relative; }
section.active { display:block; }
input, select { background:#3b0066; color:#fff; border:1px solid #7d2aff; border-radius:8px; padding:8px; box-sizing:border-box; }
button.fancy { background:linear-gradient(90deg,#7d2aff,#d18eff); border:none; color:#fff; padding:8px 15px; border-radius:10px; cursor:pointer; transition:0.3s; }
button.fancy:hover { background:linear-gradient(90deg,#d18eff,#7d2aff); transform:scale(1.05); }
.blur-card { backdrop-filter: blur(10px); background: rgba(60,0,90,0.5); border-radius:20px; padding:20px; box-shadow:0 0 30px #7d2aff; display:flex; flex-direction:column; align-items:center; transition:transform 0.3s, box-shadow 0.3s; }
.blur-card:hover { transform:translateY(-5px) scale(1.02); box-shadow:0 0 50px #d18eff; }
.blur-card img { border-radius:12px; margin-bottom:10px; max-width:180px; }

.logo-float { animation: floatLogo 4s ease-in-out infinite; filter: drop-shadow(0 0 25px #9b00ff); display:block; margin:25px auto; width:220px; }
@keyframes floatLogo { 0%,100%{transform:translateY(0px);} 50%{transform:translateY(-10px);} }
#viewer { position:absolute; top:20px; left:20px; font-size:1.1rem; text-shadow:0 0 8px #fff; }

/* Shop */
.shop-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(230px,1fr)); gap:35px; padding:30px; justify-items:center; }
.shop-card { background: radial-gradient(circle at top left, rgba(70,0,120,0.6), rgba(30,0,50,0.6)); border:1px solid #a44eff; border-radius:20px; overflow:hidden; width:230px; transition:transform 0.4s, box-shadow 0.4s; box-shadow:0 0 25px rgba(155,0,255,0.4); position:relative; }
.shop-card:hover { transform:translateY(-10px) scale(1.05); box-shadow:0 0 45px rgba(210,142,255,0.8); }
.shop-card img { width:100%; height:230px; object-fit:cover; border-bottom:2px solid #9b00ff; }
.shop-card h3 { font-size:1.2rem; margin:10px 0 5px; color:#fff; text-shadow:0 0 8px #d18eff; }
.shop-glow { position:absolute; inset:0; background: radial-gradient(circle at center, rgba(200,0,255,0.25), transparent 70%); opacity:0; transition:opacity 0.3s; pointer-events:none; }
.shop-card:hover .shop-glow { opacity:1; }

/* Mitgliederliste */
.members-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:30px; justify-items:center; padding:20px; }
.member-card { background: radial-gradient(circle at top left, rgba(70,0,120,0.6), rgba(30,0,50,0.6)); border:1px solid #a44eff; border-radius:20px; overflow:hidden; width:180px; transition: transform 0.3s, box-shadow 0.3s; box-shadow: 0 0 25px rgba(155,0,255,0.4); display:flex; flex-direction:column; align-items:center; padding:15px; cursor:pointer; }
.member-card:hover { transform: translateY(-5px) scale(1.02); box-shadow:0 0 45px rgba(210,142,255,0.8); }
.member-card img { width:80px; height:80px; border-radius:50%; object-fit:cover; margin-bottom:10px; }
.member-card h3 { font-size: 1rem; margin: 5px 0; color: #fff; text-shadow: 0 0 8px #d18eff; word-break: break-word; text-align: center; }
.member-card p { font-size: 0.85rem; color: #ddd; margin: 0; text-align: center; }

/* Login */
#login-container { position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); display:flex; justify-content:center; align-items:center; z-index:10; }
#login-box { background:#2b0030; padding:30px; border-radius:20px; width:300px; box-shadow:0 0 20px #7d2aff; text-align:center; }
#login-box input,#login-box button { display:block; width:100%; margin:10px 0; padding:10px; border-radius:8px; border:none; }
</style>
</head>
<body>

<header>💜 Purple Shadows 💜<div id="logged-in"></div></header>
<nav>
  <button onclick="showTab('home')">Startseite</button>
  <button onclick="showTab('shop')">Shop</button>
  <button onclick="showTab('members')">Mitgliederliste</button>
  <button onclick="showTab('autoliste')">Autoliste</button>
  <button id="stats-btn" onclick="showTab('stats')" style="display:none;">Statistiken</button>
</nav>
<div id="viewer">👁️ 0</div>

<!-- HOME -->
<section id="home" class="active">
  <h2>💜 Willkommen bei Purple Shadows 💜</h2>
  <img class="logo-float" src="https://cdn.discordapp.com/attachments/1231233950089744504/1425925001311293602/Lila_Schatten_Logo-removebg-preview.png">
</section>

<!-- SHOP -->
<section id="shop">
  <h2>💜 Purple Shadows - Shop 💜</h2>
  <img class="logo-float" src="https://cdn.discordapp.com/attachments/1231233950089744504/1425925001311293602/Lila_Schatten_Logo-removebg-preview.png">
  <div class="shop-grid">
    <div class="shop-card">
      <div class="shop-glow"></div>
      <img src="https://tr.rbxcdn.com/180DAY-9ed721d945d3af44a3988cdafef415d8/420/420/Shirt/Webp/noFilter">
      <h3>Shirt Variante 1</h3>
      <button class="fancy" onclick="window.open('https://www.roblox.com/catalog/136136555284898/Purple-Shadows-Shirt')">Kaufen</button>
    </div>
    <div class="shop-card">
      <div class="shop-glow"></div>
      <img src="https://tr.rbxcdn.com/180DAY-349c7d6037672b05ebb1c7a21018a854/420/420/Shirt/Webp/noFilter">
      <h3>Shirt Variante 2</h3>
      <button class="fancy" onclick="window.open('https://www.roblox.com/catalog/123029546504797/Purple-Shadows-Boss')">Kaufen</button>
    </div>
    <div class="shop-card">
      <div class="shop-glow"></div>
      <img src="https://tr.rbxcdn.com/180DAY-22d02496c4e185f1ea538245ee6cc47b/420/420/FrontAccessory/Png/noFilter">
      <h3>Unsere Weste</h3>
      <button class="fancy" onclick="window.open('https://www.roblox.com/share?code=bd366a56c010864d9d25d5c61049a40a&type=AvatarItemDetails')">Kaufen</button>
    </div>
  </div>
</section>

<!-- AUTOLISTE -->
<section id="autoliste">
  <h2>💜 Purple Shadows - Autoliste 💜</h2>
  <img class="logo-float" src="https://cdn.discordapp.com/attachments/1231233950089744504/1425925001311293602/Lila_Schatten_Logo-removebg-preview.png">
  <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:25px; padding:20px;">
    <!-- HIER KOMPLETTE AUTOS WIE VORHER EINFÜGEN -->
  </div>
</section>

<!-- MITGLIEDERLISTE -->
<section id="members">
  <h2>💜 Purple Shadows - Mitgliederliste 💜</h2>
  <img class="logo-float" src="https://cdn.discordapp.com/attachments/1231233950089744504/1425925001311293602/Lila_Schatten_Logo-removebg-preview.png">
  <div class="members-grid" id="members-grid"></div>
</section>

<!-- STATISTIKEN -->
<section id="stats">
  <h2>📊 Statistiken</h2>
  <img class="logo-float" src="https://cdn.discordapp.com/attachments/1231233950089744504/1425925001311293602/Lila_Schatten_Logo-removebg-preview.png">
  <div style="display:flex; justify-content:center; flex-wrap:wrap; gap:50px; margin-top:40px;">
    <div class="blur-card" style="max-width:400px;">
      <h3>📜 Audit Logs</h3>
      <div id="audit-log-box" style="max-height:300px; overflow-y:auto; text-align:left; background:rgba(0,0,0,0.3); padding:10px; border-radius:10px;">
        <p style="opacity:0.6;">Noch keine Logs...</p>
      </div>
    </div>
    <div class="blur-card" style="max-width:400px;">
      <h3>🟢 Online User</h3>
      <div id="online-users-box" style="max-height:300px; overflow-y:auto; text-align:left; background:rgba(0,0,0,0.3); padding:10px; border-radius:10px;">
        <p style="opacity:0.6;">Niemand online</p>
      </div>
    </div>
  </div>
</section>

<!-- AUTO POPUP -->
<div id="auto-popup">
  <div id="auto-popup-content">
    <h3 id="auto-popup-name">Auto Name</h3>
    <p id="auto-popup-preis">Preis: </p>
    <p id="auto-popup-primary">Primary Farbe: </p>
    <p id="auto-popup-interior">Interieur Farbe: </p>
    <p id="auto-popup-wheels">Felgen Farbe: </p>
    <p id="auto-popup-undercarriage">Unterboden: </p>
    <p id="auto-popup-rank">Rang: </p>
    <button class="fancy" onclick="closeAutoPopup()">Close</button>
  </div>
</div>

<!-- LOGIN -->
<div id="login-container">
  <div id="login-box">
    <h2>Login</h2>
    <input id="login-username" placeholder="Username">
    <input id="login-password" type="password" placeholder="Passwort">
    <button onclick="login()">Login</button>
    <p id="login-error" style="color:red;"></p>
  </div>
</div>

<script>
const socket = io();
let currentUser = null;
const allowedUsers = ["Julian","Max"];

function showTab(id){
  document.querySelectorAll("section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

// Mitgliederliste
async function renderMembers(){
  try{
    const res = await axios.get('/members.json');
    const members = res.data;
    const container = document.getElementById("members-grid");
    container.innerHTML="";
    members.forEach(m=>{
      const card = document.createElement("div");
      card.className="member-card";
      card.innerHTML=`
        <img src="${m.icon}" alt="${m.name}">
        <h3>${m.name}</h3>
        <p>${m.rank}</p>
      `;
      if(m.link){
        card.addEventListener("click", ()=> window.open(m.link,"_blank"));
      }
      container.appendChild(card);
    });
  }catch(e){ console.error("Fehler beim Laden der Mitglieder:",e); }
}

// Socket Events
socket.on("updateMembers", members => renderMembers());
socket.on("updateViewers", count => document.getElementById("viewer").innerText=`👁️ ${count}`);
socket.on("updateOnlineUsers", users => {
  const box = document.getElementById("online-users-box");
  box.innerHTML="";
  if(users.length===0){ box.innerHTML="<p style='opacity:0.6;'>Niemand online</p>"; return; }
  users.forEach(u=>{ const p=document.createElement("p"); p.textContent="• "+u; box.appendChild(p); });
});
socket.on("newAuditLog", log => {
  const box=document.getElementById("audit-log-box");
  if(box.querySelector("p") && box.querySelector("p").style.opacity==="0.6") box.innerHTML="";
  const time=new Date().toLocaleTimeString();
  const p=document.createElement("p");
  p.textContent=`[${time}] ${log}`;
  box.appendChild(p);
  box.scrollTop=box.scrollHeight;
});

// Login
async function login(){
  const username=document.getElementById("login-username").value.trim();
  const password=document.getElementById("login-password").value.trim();
  if(username===""||password===""){document.getElementById("login-error").innerText="Bitte ausfüllen!";return;}
  try{
    const res=await axios.post("/login",{username,password});
    if(res.data.success){
      currentUser=username;
      document.getElementById("login-container").style.display="none";
      document.getElementById("logged-in").innerText=`Eingeloggt als: ${username}`;
      socket.emit("userOnline",username);
      if(allowedUsers.includes(username)){
        document.getElementById("stats-btn").style.display="inline-block";
      }
    }else{ document.getElementById("login-error").innerText="Login fehlgeschlagen!"; }
  }catch(e){ document.getElementById("login-error").innerText="Serverfehler!"; }
}

// Auto Popup
function openAutoPopup(name, preis, primary, interior, wheels, undercarriage, rank){
  document.getElementById("auto-popup-name").innerText=name;
  document.getElementById("auto-popup-preis").innerText="Preis: "+preis;
  document.getElementById("auto-popup-primary").innerText="Primary Farbe: "+primary;
  document.getElementById("auto-popup-interior").innerText="Interieur Farbe: "+interior;
  document.getElementById("auto-popup-wheels").innerText="Felgen Farbe: "+wheels;
  document.getElementById("auto-popup-undercarriage").innerText="Unterboden: "+undercarriage;
  document.getElementById("auto-popup-rank").innerText="Rang: "+rank;
  document.getElementById("auto-popup").style.display="flex";
}
function closeAutoPopup(){ document.getElementById("auto-popup").style.display="none"; }

// Initial Members
renderMembers();
</script>

</body>
</html>


